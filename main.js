(()=>{"use strict";var e=document.querySelector("#card-template").content,t=function(e){e.target.classList.toggle("card__like-button_is-active")},n=function(e){e.target.closest(".card").remove()};function r(t,n,r,o){var c=e.querySelector(".card").cloneNode(!0);c.querySelector(".card__title").textContent=t.name;var u=c.querySelector(".card__image");return u.src=t.link,u.alt=t.name,c.querySelector(".card__delete-button").addEventListener("click",n),c.querySelector(".card__like-button").addEventListener("click",r),u.addEventListener("click",(function(){return o(t)})),c}function o(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",u),e.addEventListener("click",p)}function c(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u),e.removeEventListener("click",p)}function u(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&c(t)}}function p(e){e.target.classList.contains("popup")&&c(e.target)}function i(e,t){return new RegExp("^[".concat(t,"]+$")).test(e)}function a(e,t){e.dataset.error=t,e.classList.add("error")}function l(e){e.dataset.error=null,e.classList.remove("error")}document.querySelector(".content");var s=document.querySelector(".places__list"),d=document.querySelector(".popup_type_edit"),_=document.querySelector(".popup_type_new-card"),m=document.querySelector(".popup_type_image"),v=function(e){m.querySelector(".popup__image").src=e.link,m.querySelector(".popup__image").alt=m.querySelector(".popup__caption").textContent=e.name,o(m)};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){s.append(r(e,n,t,v))})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){y.value=document.querySelector(".profile__title").textContent,S.value=document.querySelector(".profile__description").textContent,o(d)})),document.querySelector(".profile__add-button").addEventListener("click",(function(){return o(_)})),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",(function(e){c(e.target.closest(".popup"))}))})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("click",p)}));var f=document.querySelector('.popup__form[name="edit-profile"]'),y=f.querySelector(".popup__input_type_name"),S=f.querySelector(".popup__input_type_description");f.addEventListener("submit",(function(e){e.preventDefault();var t=y.value,n=S.value,r=document.querySelector(".profile__title"),o=document.querySelector(".profile__description");r.textContent=t,o.textContent=n,c(f.closest(".popup"))}));var k,q,E,L,g,b,h,x,C,j=_.querySelector('form[name="new-place"]');j.addEventListener("submit",(function(e){e.preventDefault();var t=r({name:j.elements["place-name"].value,link:j.elements.link.value},n);s.prepend(t),c(_),j.reset()})),E=void 0===(q=(k={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}).formSelector)?".popup__form":q,g=void 0===(L=k.inputSelector)?".popup__input":L,h=void 0===(b=k.submitButtonSelector)?".popup__button":b,C=void 0===(x=k.inactiveButtonClass)?"popup__button_disabled":x,document.querySelectorAll(E).forEach((function(e){e.addEventListener("input",(function(t){var n=t.target;i(n.value,"/^[a-zа-яА-ЯёЁ -]+$/i")?l(n):a(n,"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы");var r=Array.from(e.elements).every((function(e){return!e.dataset.error}));e.querySelector(h).classList.toggle(C,!r)}))})),document.querySelectorAll(g).forEach((function(e){e.addEventListener("focus",(function(){l(e)})),e.addEventListener("blur",(function(){i(e.value,"/^[a-zа-яА-ЯёЁ -]+$/i")||a(e,"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы")}))})),document.querySelectorAll(h).forEach((function(e){e.addEventListener("click",(function(){e.classList.add(C)}))}))})();